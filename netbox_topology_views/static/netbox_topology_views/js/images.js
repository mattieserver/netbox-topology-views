(()=>{var f=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var d=(t,e,n)=>new Promise((r,s)=>{var i=o=>{try{c(n.next(o))}catch(a){s(a)}},m=o=>{try{c(n.throw(o))}catch(a){s(a)}},c=o=>o.done?r(o.value):Promise.resolve(o.value).then(i,m);c((n=n.apply(t,e)).next())});var k=f(g=>{var u={},l=null,p=t=>{var n;if(!document.cookie)return null;let e=(n=document.cookie.split(";").find(r=>r.trim().substring(0,t.length+1)===t+"="))==null?void 0:n.substring(t.length+1);return e?decodeURIComponent(e):null};document.addEventListener("DOMContentLoaded",()=>{l=p("csrftoken")});document.querySelector("form#images").addEventListener("submit",t=>d(g,null,function*(){t.preventDefault();try{let e=yield fetch("/api/plugins/netbox_topology_views/images/",{method:"POST",body:JSON.stringify(u),headers:{"X-CSRFToken":l,"Content-Type":"application/json"}});if(!e.ok)throw new Error(yield e.text());toast.success("Saved settings")}catch(e){console.dir(e),toast.error(e.message)}}));document.querySelectorAll("form#images .dropdown-menu img").forEach(t=>{t.addEventListener("click",e=>{var i;if(!(e.currentTarget instanceof HTMLElement))return;let{dataset:{role:n,image:r}}=e.currentTarget;u[parseInt(n)]=r;let s=(i=e.currentTarget.closest(".dropdown"))==null?void 0:i.querySelector(`#dropdownMenuButton${n}`);s&&(s.innerHTML=`<img src="${r}" />`)})})});k();})();
