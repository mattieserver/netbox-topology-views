(()=>{var l=(e,t,o)=>new Promise((n,s)=>{var c=r=>{try{i(o.next(r))}catch(a){s(a)}},m=r=>{try{i(o.throw(r))}catch(a){s(a)}},i=r=>r.done?n(r.value):Promise.resolve(r.value).then(c,m);i((o=o.apply(e,t)).next())});var d=e=>{var o;if(!document.cookie)return null;let t=(o=document.cookie.split(";").find(n=>n.trim().substring(0,e.length+1)===e+"="))==null?void 0:o.substring(e.length+1);return t?decodeURIComponent(t):null};var u={success:e=>{let t=document.querySelector("#topology-plugin-success-toast");if(!t)return console.error("Could not find toast component!");let o=t.querySelector("span");o.textContent=e,new window.Toast(t).show()},error:e=>{let t=document.querySelector("#topology-plugin-error-toast");if(!t)return console.error("Could not find toast component!");let o=t.querySelector("span");o.textContent=e,new window.Toast(t).show()}};var p={},g=d("csrftoken");document.querySelector("form#images").addEventListener("submit",e=>l(void 0,null,function*(){e.preventDefault();try{let t=yield fetch("/api/plugins/netbox_topology_views/images/",{method:"POST",body:JSON.stringify(p),headers:{"X-CSRFToken":g,"Content-Type":"application/json"}});if(!t.ok)throw new Error(yield t.text());u.success("Saved settings")}catch(t){console.dir(t),u.error(t.message)}}));document.querySelectorAll("form#images .dropdown-menu img").forEach(e=>{e.addEventListener("click",t=>{var c;if(!(t.currentTarget instanceof HTMLElement))return;let{dataset:{role:o,image:n}}=t.currentTarget;p[parseInt(o)]=n;let s=(c=t.currentTarget.closest(".dropdown"))==null?void 0:c.querySelector(`#dropdownMenuButton${o}`);s&&(s.innerHTML=`<img src="${n}" />`)})});})();
